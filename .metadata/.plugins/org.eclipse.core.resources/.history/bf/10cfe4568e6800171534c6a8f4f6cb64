#include <iostream>
#include <opencv2/opencv.hpp>
using namespace std;
using namespace cv;

int main() {
	VideoCapture *capture;

	capture->open(0);

	if (!capture->isOpened()) {
		return -1;
	}

	double w = 320, h = 240;
	capture->set(CV_CAP_PROP_FRAME_WIDTH, w);
	capture->set(CV_CAP_PROP_FRAME_HEIGHT, h);
	capture->set(CV_CAP_PROP_FRAME_WIDTH, w);
	capture->set(CV_CAP_PROP_FRAME_HEIGHT, h);

	while (true) {
		frame = cvQueryFrame(capture);

		//展示当前帧的图片
		cvShowImage("myWindow", frame);
		char c = cvWaitKey(33);
		if (c == 27) {
			break;
		}
	}
	//释放视频
	cvReleaseCapture(&capture);
	//销毁窗口
	cvDestroyWindow("myWindow");
}
